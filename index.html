<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Barcode Scanner to Google Sheets</title>
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
  <script src="html5-qrcode.min.js"></script>
</head>
<body>
  <h1>Scan Barcode</h1>

  <div id="reader" style="width:300px;"></div>
  <p id="result">Result will appear here</p>

  <script>


    const sheetAPI = "AKfycbyyCsbaPghrYUrL3DKO1plSOEdZ_XoExHNAR3VjdraQPiEmHiTgGDdD8cOnpK7q_qId"; // <-- Paste your Apps Script web app URL

    function sendBarcode(barcode) {
      fetch(sheetAPI, {
        method: "POST",
        body: JSON.stringify({ barcode: barcode }),
        headers: { "Content-Type": "application/json" }
      })
      .then(res => res.json())
      .then(response => {
        document.getElementById('result').innerText = 
          `Success: ${barcode}`;
      })
      .catch(err => {
        document.getElementById('result').innerText = 
          `Error: ${err}`;
      });
    }

    function onScanSuccess(decodedText) {
      document.getElementById('result').innerText = `Scanned: ${decodedText}`;
      sendBarcode(decodedText);
    }

    const html5QrCode = new Html5Qrcode("reader");
    const qrCodeScannerConfig = { fps: 10, qrbox: 250 };

    html5QrCode.start(
      { facingMode: "environment" },
      qrCodeScannerConfig,
      onScanSuccess
    ).catch(err => {
      document.getElementById('result').innerText = `Error: ${err}`;
    });
  </script>
</body>
</html>
